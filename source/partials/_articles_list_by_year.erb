<ul>
  <% year, article_year = nil %>
  <% articles.each_with_index do |article, i| %>
    <% article_year = article.date.strftime('%Y') %>
    <% if year != article_year %>
      <% year = article_year %>

      <% if article != articles.first %>
        </div> <!-- end year -->
      <% end %>

      <h2><%= year %></h2>
      <div id="<%= year %>" class="year year=<%= year %>">

    <% end %>


    <li class="<%= 'first' if article == articles.first %> <%= 'last' if article == articles.last %>">
      <article>
        <time class="small-2 columns" datetime="<%= article.date.xmlschema %>" pubdate>
          <span class="month"><%= article.date.strftime('%b') %></span>
          <span class='day'><%= article.date.strftime('%d') %></span>
        </time>
        <h3 class="small-10 columns"><%= link_to article.title, article %></h3>
        <footer class="small-10 columns offset-by-two">
          <span class="categories">posted in <%= partial 'partials/post_categories', :locals => { :article => article } %></span>
        </footer>
      </article>
    </li>
  <% end %>
  </div> <!-- end year -->
</ul>
